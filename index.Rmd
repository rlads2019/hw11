---
author: "æœªå‘½å B01201001 ä¸€èˆ¬ç³»"
title: "HW 11: Web APIã€JSONã€`httr`"
date: |
  | 2019-11-21
  |
  | [Rmd Source (for TAs)](./index.Rmd){download='`r basename(getwd())`.Rmd'}
output:
  html_document:
    number_sections: yes
    highlight: tango
    toc: yes
    toc_float:
      collapsed: no
    css: style.css
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, comment = '#>', error=TRUE, results = 'hold', out.width='70%', fig.align = 'center', message = FALSE)
```


Dcard API (å…± 80 åˆ†)
==============================

è«‹åƒè€ƒ <https://levirve.github.io/blog/2016/Dccard-crawler/> çš„ã€Œç¶²ç«™ API è¦å‰‡ã€æ®µè½ï¼Œä¸¦è§€å¯Ÿ [Dcard API é é¢](https://dcard.tw/_api/) ä»¥åŠ [Dcard å®˜æ–¹é é¢](https://www.dcard.tw/)ï¼Œäº†è§£ä½ å¯ä»¥é€é Dcard API å–å¾—ä»€éº¼æ¨£çš„è³‡æ–™ã€‚

ä¸‹æ–¹ç¨‹å¼ç¢¼å¯å¾ `https://dcard.tw/_api/forums/makeup/posts` å–å¾— [Dcard ç¾å¦æ¿](https://www.dcard.tw/f/makeup) çš„æ–‡ç« è³‡è¨Š

```{r}
library(httr)
req <- GET('https://www.dcard.tw/', 
           path = c("_api", "forums", "makeup", "posts"))

req[["status_code"]]
makeup_idx <- content(req)
```


1. (30 åˆ†)  
è«‹è§€å¯Ÿ `https://dcard.tw/_api/forums/makeup/posts` ç•¶ä¸­çš„å…§å®¹ï¼Œä»¥å–å‡ºå„²å­˜æ–¼ `makeup_idx` ä¸­ï¼Œ**ç¬¬ä¸€ç¯‡**æ–‡ç« çš„ `id` (character vector of length 1)ã€‚

    ```{r}
    # Your code goes here
    
    
    # å› ç‚ºæ–‡ç« éš¨æ™‚æœƒæ›´æ–°ï¼Œæ‰€ä»¥çµæœä¸æœƒä¸€æ¨£
    # Should print out something like:
    #> [1] 232518734
    ```


2. (50 åˆ†)  
è«‹é€éä¸Šä¸€é¡Œå–å‡ºçš„ `id`ï¼Œå†å‘ Dcard API ç™¼å‡º requestï¼Œå–å¾—è©²ç¯‡æ–‡ç« çš„å…§æ–‡ (`content`)ã€‚  
(hint: é€™é¡Œéœ€å‘ä¸åŒçš„ URL è«‹æ±‚è³‡æ–™ï¼Œè«‹åƒè€ƒä¸Šæ–¹çš„ç¶²é ä»¥æ‰¾å‡ºé©å®œçš„ URL)

    ```{r}
    # Your code goes here
    
    
    # Should print out something like:
    #> [1] "å°æ–¼æ„›çœ‹æ£’çƒçš„æˆ‘ï¼Œé›–ç„¶ç„¡æ³•åˆ°ç¾å ´åŠ æ²¹ä½†å¿ƒè¦åŒåœ¨ï½\næˆ‘æ„›éŸ“åœ‹è¼¸å•¦ï¼ï¼ï¼\nè¶è‘—æ£’çƒé­‚ä¸Šèº«ä¾†åˆ†äº«ä¸€ä¸‹æ£’çƒåŠ æ²¹å¦\n \nBTWå•¦å•¦éšŠæ°£æ°›æ•´å€‹è¶…å—¨\næ¯å€‹é¸æ‰‹ä¸Šå ´å¿…å”±ç‰¹å®šæ‡‰æ´æ›²+å‹•ä½œ\nè¶…æƒ³è¡å»å‰é¢è·Ÿå•¦å•¦éšŠä¸€èµ·è·³-///-\n \nå¦å®¹å¦‚ä¸‹\nhttps://i.imgur.com/IrH709F.jpg\nhttps://i.imgur.com/NGJ0vnV.jpg\nè‡ªå‚™åŠ æ²¹æ£’è¶…æœ‰çœ‹æ£’çƒçš„æ„Ÿè¦ºï¼ˆæ¡\n \nç‰¹åˆ¥åˆ†äº«æˆ‘æœ€è¿‘å¥½æ„›çš„ç´…å”‡GAå”‡èƒ#400ğŸ’‹ğŸ’‹ğŸ’‹\næ˜¯äºæ›¼å°¼æ­£ç´…ï¼Œå……æ»¿æ´»åŠ›åˆå¹´è¼•çš„æ­£ç´…è‰²\nçœŸçš„è¶…ç¾è¶…ç´šé£½å’Œçš„\næ‹¿ä¾†ç•«ç´…å”‡å’ŒLogo(?!)å®Œç¾â¤â¤â¤\nhttps://i.imgur.com/pGu8Mgy.jpg\nhttps://i.imgur.com/oM0HlkN.jpg\næ—¥å¸¸å¦ä¹Ÿå¯ä»¥é§•é¦­çš„å¥½çœ‹ç´…å”‡ğŸ’‹\nå°å¥³å­å£ç´…ä¸å«Œå¤šå•Šâ¤\nç°¡å–®æ£’çƒåŠ æ²¹å¦åˆ†äº«åˆ°é€™é‚Š\né›–ç„¶ä¸­è¯éšŠé‚„æ˜¯è¼¸äº†\nä¸éä½ å€‘è¶…æ£’ï¼ï¼ï¼ä»¥ä½ å€‘ç‚ºæ¦®\n \næœ‰æ²’æœ‰äººæœ€è¿‘ä¹Ÿç‡ƒç‡’æ£’çƒé­‚çš„ï½ï½"
    ```



å¾ Dcard API æ’ˆè³‡æ–™ (å…± 40 åˆ†)
==============================

åœ¨çŸ¥é“æ€éº¼å¾ `https://dcard.tw/_api/forums/makeup/posts` å–å¾—æ–‡ç«  idï¼Œä¸¦é€éæ­¤ id å–å¾—æ–‡ç« å…§æ–‡å¾Œï¼Œå°±æ‡‰è©²çŸ¥é“æ€éº¼å¾ Dcard æ”¶é›†èªæ–™äº†ï½

ä½ çš„ä»»å‹™æ˜¯é€é Web APIï¼Œå¾ [ç¾å¦æ¿](https://www.dcard.tw/f/makeup) ä»¥åŠ [æ–°ç”Ÿæ¿](https://www.dcard.tw/f/freshman) å„æŠ“å‡º 3 ç¯‡æ–‡ç«  (é †åºéš¨ä¾¿ï¼Œå¯ä»¥éš¨æ©Ÿä¹Ÿå¯æŠ“å‡ºå‰ 3 å€‹)ï¼Œä¸¦å°‡çµæœæ•´ç†æˆä¸€ä»½ data frameã€‚é€™ä»½ data frame ä¸­å¿…é ˆå…·æœ‰ä¸‹åˆ—è®Šé …ï¼š

- `id`: æ–‡ç«  id
- `forum`: æ–‡ç« çœ‹æ¿ (`makeup` æˆ– `freshman`)
- `gender`: ä½œè€…æ€§åˆ¥
- `title`: æ–‡ç« æ¨™é¡Œ
- `content`: æ–‡ç« å…§æ–‡

```{r}
# Your code goes here


# Should print out something like:
#>          id    forum gender              title                  content
#> 1 232519207   makeup      F             çš®è†šç´°...    æ¯æ¬¡ä¸Šç¶²çœ‹äººå®¶å½¢å®¹...
#> 2 232518995   makeup      F       çµ‚æ–¼è€ƒå®ŒæœŸä¸­...      å°æ–¼æ„›çœ‹æ£’çƒçš„æˆ‘...
#> 3 232518833   makeup      F        åˆ†äº« éŸ“åœ‹è¼¸...    é€™ç¯‡è·Ÿä¸Šä¸€ç¯‡çš„æº«æŸ”...
#> 4 232517835 freshman      F   æ€¥ï¼ã€Šå½©      å¼...    å¤§å®¶å¥½ï½\nå› ç‚ºæ¯”è³½...
#> 5 232516213 freshman      M    æˆå¤§æ˜¯ã„…æ˜¯éƒ½4å»¢...       å¦‚T\né–‹æˆ°é˜¿\nçª©...
#> 6 232515512 freshman      M     æˆ‘è¦æƒ³éæ³“å…‰è·Ÿ...      é™¤äº†åˆ†æ•¸æ¯”è¼ƒå·®ç•°...
```


